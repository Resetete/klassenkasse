<!doctype html>
<html lang="en" data-theme="minimal">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="canonical" href="https://www.classfund.app/" />
  <title>Class Fund — Family Accounts</title>
  <meta name="description" content="Free class fund app (Klassenkasse). GDPR/DSGVO compliant, no login, no cloud. Data is stored locally in your browser. Export regular backups to avoid data loss." />

  <link rel="stylesheet" href="style.css" />

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
</head>

<body>
  <div class="app">

    <!-- =====================================================
         HEADER
         ===================================================== -->
    <header class="topbar">
      <div class="topbar__title">
        <h1 data-i18n="appTitle">Class Fund</h1>
        <p class="sub" data-i18n="appSubtitle">
          Family accounts, contributions, split class expenses, balances & email texts.
        </p>
      </div>

      <div class="topbar__controls">
        <div class="seg">
          <label class="seg__label" for="lang" data-i18n="languageLabel">Language</label>
          <select id="lang" class="seg__select">
            <option value="en">EN</option>
            <option value="de">DE</option>
          </select>
        </div>

        <div class="seg">
          <label class="seg__label" for="theme" data-i18n="themeLabel">Theme</label>
          <select id="theme" class="seg__select">
            <option value="minimal">Minimal</option>
            <option value="paper">Paper</option>
          </select>
        </div>

        <button class="btn" id="reminderBtn" type="button" data-i18n="reminderBtn">Reminders</button>
        <button class="btn" id="exportBtn" type="button" data-i18n="exportBtn">Export</button>
        <button class="btn" id="downloadBankCsvBtn" type="button" data-i18n="downloadBankCsvBtn" >CSV (Bank) Download</button>
        <button class="btn" id="importBtn" type="button" data-i18n="importBtn">Import</button>
        <button class="btn btn--danger" id="resetBtn" type="button" data-i18n="resetBtn">Reset</button>
      </div>

      <!-- Donate -->
      <div class="donateButton">
        <form action="https://www.paypal.com/donate" method="post" target="_top" class="donate">
          <input type="hidden" name="hosted_button_id" value="UA2Y443NFH76J" />
          <input
            type="image"
            src="https://pics.paypal.com/00/s/NTE0YTZlOWQtZGUwNy00NzU3LWI4ZDYtNWQ2NmYwMTA4YWE2/file.PNG"
            name="submit"
            alt="Donate with PayPal"
          />
        </form>
      </div>
    </header>

    <!-- =====================================================
    MAIN GRID
    ===================================================== -->
    <main class="grid">

      <!-- ================= LEFT COLUMN ================= -->
      <section class="card">

        <!-- Summary -->
        <h2 data-i18n="summaryTitle">Overview</h2>
        <div class="summary">
          <div class="summary__item">
            <div class="summary__label" data-i18n="totalBalanceLabel">Total balance</div>
            <div class="summary__value" id="totalBalance">0,00 €</div>
          </div>
          <div class="summary__item">
            <div class="summary__label" data-i18n="familiesCountLabel">Families</div>
            <div class="summary__value" id="familiesCount">0</div>
          </div>
          <div class="summary__item">
            <div class="summary__label" data-i18n="txCountLabel">Transactions</div>
            <div class="summary__value" id="txCount">0</div>
          </div>
        </div>

        <div class="summary__item">
          <div class="summary__label" data-i18n="bankDeposits">Deposits (bank)</div>
          <div class="summary__value" id="bankDeposits">0,00 €</div>
        </div>

        <div class="summary__item">
          <div class="summary__label" data-i18n="bankExpenses">Expenses (bank)</div>
          <div class="summary__value" id="bankExpenses">0,00 €</div>
        </div>

        <div class="summary__item">
          <div class="summary__label" data-i18n="bankBalance">Bank balance</div>
          <div class="summary__value" id="bankBalance">0,00 €</div>
        </div>

        <hr class="hr" />

        <!-- Settings -->
        <h2 data-i18n="settingsTitle">Settings</h2>
        <div class="field">
          <label for="targetAmount" data-i18n="targetAmountLabel">Target amount per family (€)</label>
          <input id="targetAmount" type="number" min="0" step="0.01" inputmode="decimal" data-i18n-placeholder="phTargetAmount" />
        </div>
        <p class="hint" data-i18n="targetHint">
          If set: each family should have at least this balance.
        </p>

        <hr class="hr" />

        <!-- ================= DEPOSIT ================= -->
        <h2 data-i18n="depositTitle">Contribution</h2>

        <div class="field">
          <label for="depositDate" data-i18n="dateLabel">Date</label>
          <input id="depositDate" type="date" />
        </div>

        <div class="field">
          <label for="depositFamily" data-i18n="familyLabel">Family</label>
          <select id="depositFamily"></select>
        </div>

        <div class="field">
          <label for="depositCategory" data-i18n="categoryLabel">Kategorie</label>
          <select id="depositCategory"></select>
        </div>

        <div class="field">
          <label for="depositAmount" data-i18n="amountLabel">Amount (€)</label>
          <input id="depositAmount" type="number" step="0.01" inputmode="decimal" data-i18n-placeholder="phDepositAmount" />
        </div>

        <div class="field">
          <label for="depositNote" data-i18n="noteLabel">Note (optional)</label>
          <input id="depositNote" type="text" maxlength="120" data-i18n-placeholder="phDepositNote" />
        </div>

        <button class="btn btn--primary" id="addDepositBtn" type="button" data-i18n="addDepositBtn">
          Add contribution
        </button>

        <hr class="hr" />

        <!-- ================= EXPENSE ================= -->
        <h2 data-i18n="classExpenseTitle">Split class expense</h2>

        <div class="field">
          <label for="expenseCategory" data-i18n="categoryLabel">Kategorie</label>
          <select id="expenseCategory"></select>
        </div>

        <div class="field">
          <label for="expenseDate" data-i18n="dateLabel">Date</label>
          <input id="expenseDate" type="date" />
        </div>

        <div class="field">
          <label for="expenseTitle" data-i18n="expenseTitleLabel">Title</label>
          <input id="expenseTitle" type="text" maxlength="80" data-i18n-placeholder="phExpenseTitle" />
        </div>

        <div class="field">
          <label for="expenseAmount" data-i18n="totalAmountLabel">Total amount (€)</label>
          <input id="expenseAmount" type="number" step="0.01" inputmode="decimal" data-i18n-placeholder="phExpenseAmount" />
        </div>

        <div class="field">
          <label>Auswahl</label>
          <div class="radio">
            <label style="display:flex; gap:8px; align-items:center;">
              <input type="radio" name="expenseMode" id="expenseModeAll" />
              <span>Alle Familien auswählen</span>
            </label>
            <label style="display:flex; gap:8px; align-items:center; margin-left:14px;">
              <input type="radio" name="expenseMode" id="expenseModeCustom" />
              <span>Nur ausgewählte Familien</span>
            </label>
          </div>
        </div>

        <div class="field">
          <label data-i18n="expenseSelectLabel">Families</label>
          <div id="expenseFamilyChecklist" class="checklist"></div>
          <p class="hint" id="expenseAllHint" hidden data-i18n="expenseAllHint">
            All eligible families are preselected — uncheck to exclude.
          </p>
        </div>

        <button class="btn btn--primary" id="addExpenseBtn" type="button" data-i18n="addExpenseBtn">
          Split expense
        </button>

        <p class="hint" data-i18n="roundingHint">
          Cent remainders are distributed fairly.
        </p>

        <hr class="hr" />

        <!-- ================= ADD FAMILY ================= -->
        <details id="familyFormDetails" class="detailsCard">
          <summary class="detailsSummary">
            <span data-i18n="addFamilyTitle">Add family</span>
            <span class="muted small" data-i18n="familyRareHint">(rarely needed – new family joins)</span>
          </summary>

          <div class="detailsBody">
            <div class="field">
              <label for="parent1" data-i18n="parent1Label">Parent 1</label>
              <input id="parent1" type="text" maxlength="60" data-i18n-placeholder="phParent1" />
            </div>

            <div class="field">
              <label for="parent2" data-i18n="parent2Label">Parent 2 (optional)</label>
              <input id="parent2" type="text" maxlength="60" data-i18n-placeholder="phParent2" />
            </div>

            <div class="field">
              <label for="email" data-i18n="emailLabel">Email</label>
              <input id="email" type="email" maxlength="120" data-i18n-placeholder="phEmail" />
              <p class="hint" data-i18n="emailOptionalHint">Optional — reminders/emails are disabled without an email.</p>
            </div>

            <div class="field">
              <label for="children" data-i18n="childrenLabel">Children (comma-separated)</label>
              <input id="children" type="text" maxlength="120" data-i18n-placeholder="phChildren" />
            </div>

            <div class="row2">
              <div class="field">
                <label for="activeFrom" data-i18n="activeFromLabel">In class from</label>
                <input id="activeFrom" type="date" />
              </div>
              <div class="field">
                <label for="activeTo" data-i18n="activeToLabel">In class until</label>
                <input id="activeTo" type="date" />
              </div>
            </div>

            <div class="field">
              <label for="familyNote" data-i18n="familyNoteLabel">Comment</label>
              <input id="familyNote" type="text" maxlength="160" data-i18n-placeholder="phFamilyNote" />
            </div>

            <button class="btn btn--primary" id="addFamilyBtn" type="button" data-i18n="addFamilyBtn">
              Add family
            </button>

            <p class="hint" data-i18n="familyHint">
              Tip: inactive families are excluded from selections, but remain in history.
            </p>
          </div>
        </details>
      </section>

      <!-- ================= RIGHT COLUMN ================= -->
      <section class="card">
        <h2 data-i18n="familiesTitle">Families</h2>
        <div id="familiesList" class="families"></div>

        <hr class="hr" />

        <h2 data-i18n="categoriesTitle">Kategorien</h2>
        <div id="categoryOverview" class="categoryOverview"></div>

        <hr class="hr" />

        <h2 data-i18n="ledgerTitle">History</h2>
        <div id="ledger" class="ledger"></div>

        <p class="empty muted" id="emptyState" hidden data-i18n="emptyState">
          No transactions yet.
        </p>
      </section>
    </main>

    <!-- SEO + Privacy -->
      <section class="seo-privacy" aria-label="Privacy and data protection">
        <div data-lang="en">
          <h2>Privacy-friendly & GDPR compliant</h2>
          <p>
            This class fund app is completely free and runs entirely in your browser.
            No accounts, no cloud storage, and no app data is sent to a server.
          </p>
          <p>
            Your class fund data is stored locally in your browser (local storage).
            This makes the app privacy-friendly and GDPR compliant for parent groups, classes and schools.
          </p>
          <p>
            Important: local browser storage can be deleted (for example when you clear website data, use private browsing,
            change devices, or reinstall the browser). Please export regular backups to avoid data loss.
          </p>

          <p class="small muted">
            This website uses privacy-friendly analytics (no cookies).
          </p>
        </div>

        <div data-lang="de">
          <h2>Datenschutzfreundlich & DSGVO-konform</h2>
          <p>
            Diese Klassenkassen-App ist komplett kostenlos und läuft vollständig in deinem Browser.
            Kein Login, keine Cloud — und die App-Daten werden nicht an einen Server übertragen.
          </p>
          <p>
            Deine Klassenkassen-Daten werden lokal im Browser gespeichert (Local Storage).
            Dadurch ist die App datenschutzfreundliche und DSGVO-konform – ideal für Elterninitiativen, Klassen und Schulen.
          </p>
          <p>
            Wichtig: Lokaler Browserspeicher kann gelöscht werden (z. B. beim Löschen von Website-Daten,
            im privaten Modus, beim Gerätewechsel oder bei einer Neuinstallation). Bitte exportiere regelmäßig Backups,
            damit keine Daten verloren gehen.
          </p>

          <p class="small muted">
            Diese Website nutzt datenschutzfreundliche Analytics (ohne Cookies).
          </p>
        </div>
      </section>

      <!-- FAQ (good for SEO) -->
      <section class="seo-faq" aria-label="FAQ">
        <div data-lang="en">
          <h2>FAQ</h2>

          <h3>Is the app free?</h3>
          <p>Yes — it’s completely free to use.</p>

          <h3>Where is my data stored?</h3>
          <p>Locally in your browser (local storage). No cloud account needed.</p>

          <h3>Can I lose my data?</h3>
          <p>
            Yes. If website data is cleared or you switch devices/browsers, local storage may be removed.
            Export backups regularly.
          </p>
        </div>

        <div data-lang="de">
          <h2>FAQ</h2>

          <h3>Ist die App kostenlos?</h3>
          <p>Ja — die Nutzung ist komplett kostenlos.</p>

          <h3>Wo werden meine Daten gespeichert?</h3>
          <p>Lokal im Browser (Local Storage). Du brauchst kein Cloud-Konto.</p>

          <h3>Können Daten verloren gehen?</h3>
          <p>
            Ja. Wenn Website-Daten gelöscht werden oder du Browser/Gerät wechselst, kann der lokale Speicher entfernt werden.
            Bitte regelmäßig exportieren.
          </p>
        </div>
      </section>

      <!-- SEO teaser -->
      <section class="seo-teaser" aria-labelledby="classfund-h2">
        <div data-lang="en">
          <h2 id="classfund-h2" data-i18n="appHeaderSubpage">
            Why class funds get messy fast
          </h2>
          <p data-i18n="appSubpageExplanation">
            Cash, WhatsApp messages and spreadsheets break down quickly. People lose track of who paid and what the money was used for. ClassFund keeps everything clear in one place.
          </p>
          <a id="seoLink" href="./pages/en/class-fund-explainer.html" data-i18n="appSubpageLink">
            Read how to run a class fund without chaos
          </a>
        </div>
        <div data-lang="de">
          <h2 id="classfund-teaser-h2-de">Warum Klassenkassen schnell unübersichtlich werden</h2>
          <p>
            Bargeld, WhatsApp-Nachrichten und Tabellen werden schnell chaotisch. Man verliert den Überblick, wer schon gezahlt hat
            und wofür das Geld ausgegeben wurde. ClassFund hält alles übersichtlich an einem Ort.
          </p>
          <a href="/pages/de/klassenkasse-erklaerung.html">
            Lies, wie du eine Klassenkasse ohne Chaos organisierst
          </a>
        </div>
      </section>
    <!-- Footer -->
    <footer class="app-footer">
      <div class="footer-container">
        <a href="https://theresamannschatz.design" class="footer-brand" target="_blank" rel="noopener">
          <img
            class="footer-logo"
            src="chamaeleon.png"
            alt="Theresa Mannschatz – Design"
          />
        </a>

        <div class="footer-meta">
          <span>© 2026 Theresa Mannschatz</span>
          <span class="footer-sep">·</span>
          <a id="imprint-link" href="../imprint/index.html">Imprint</a>
        </div>
      </div>
    </footer>


    <!-- ================= MODALS (kept for full features) ================= -->

    <!-- Export modal -->
    <dialog id="exportDialog" class="dialog">
      <div class="dialog__head">
        <strong data-i18n="exportTitle">Export</strong>
        <button class="btn btn--icon" id="closeExport" type="button" aria-label="Close">✕</button>
      </div>
      <p class="muted" data-i18n="exportHelp">Copy this JSON or download it as a file.</p>
      <textarea id="exportText" class="exportText" rows="10" readonly></textarea>
      <div class="dialog__actions">
        <button class="btn" id="copyExport" type="button" data-i18n="copyBtn">Copy</button>
        <button class="btn btn--primary" id="downloadExport" type="button" data-i18n="downloadBtn">Download .json</button>
      </div>
    </dialog>

    <!-- Reset confirm -->
    <dialog id="confirmDialog" class="dialog">
      <div class="dialog__head">
        <strong data-i18n="resetTitle">Reset everything?</strong>
        <button class="btn btn--icon" id="closeConfirm" type="button" aria-label="Close">✕</button>
      </div>
      <p class="muted" data-i18n="resetHelp">All data will be removed from this browser. Export first if you want a backup.</p>
      <div class="dialog__actions">
        <button class="btn" id="cancelReset" type="button" data-i18n="cancelBtn">Cancel</button>
        <button class="btn btn--danger" id="confirmReset" type="button" data-i18n="confirmBtn">Reset</button>
      </div>
    </dialog>

    <!-- Import modal -->
    <dialog id="importDialog" class="dialog">
      <div class="dialog__head">
        <strong>Import</strong>
        <button class="btn btn--icon" id="closeImport" type="button" aria-label="Close">✕</button>
      </div>

      <p class="muted" id="importHelpText">
        Import a previous export (.json). Your current data will be replaced in this browser.
      </p>

      <div id="importDropzone" class="dropzone" role="button" tabindex="0" aria-label="Import dropzone">
        <div class="dropzone__title">Drop JSON here</div>
        <div class="dropzone__sub muted">…or choose a file</div>
      </div>

      <div class="dialog__actions">
        <button class="btn" id="importBackupExport" type="button">Export backup</button>

        <label class="btn btn--file">
          <input id="importDialogFile" type="file" accept="application/json" />
          <span>Choose .json</span>
        </label>

        <button class="btn btn--primary" id="confirmImportBtn" type="button" disabled>
          Import
        </button>
      </div>

      <div class="importStatus" id="importStatus" aria-live="polite"></div>
    </dialog>

    <!-- Email modal -->
    <dialog id="emailDialog" class="dialog dialog--wide">
      <div class="dialog__head">
        <strong data-i18n="emailTitle">Create email</strong>
        <button class="btn btn--icon" id="closeEmail" type="button" aria-label="Close">✕</button>
      </div>

      <div class="emailGrid">
        <div class="emailCol">
          <div class="field">
            <label for="emailSubject" data-i18n="emailSubjectLabel">Subject</label>
            <input id="emailSubject" type="text" maxlength="120" />
          </div>

          <div class="field">
            <label for="emailTemplate" data-i18n="emailTemplateLabel">Template</label>
            <textarea id="emailTemplate" rows="10"></textarea>
          </div>

          <p class="hint" data-i18n="emailPlaceholdersHint">
            Placeholders: {{parents}}, {{children}}, {{balance}}, {{due}}, {{target}}, {{email}}, {{today}}
          </p>

          <div class="dialog__actions">
            <button class="btn" id="copyEmail" type="button" data-i18n="copyBtn">Copy</button>
            <button class="btn btn--primary" id="openMailto" type="button" data-i18n="openMailBtn">Open mail app</button>
          </div>
        </div>

        <div class="emailCol">
          <div class="field">
            <label data-i18n="emailPreviewLabel">Preview</label>
            <pre id="emailPreview" class="preview"></pre>
          </div>
        </div>
      </div>
    </dialog>

    <!-- Reminder batch modal -->
    <dialog id="reminderDialog" class="dialog dialog--wide">
      <div class="dialog__head">
        <strong data-i18n="reminderTitle">Reminder batch</strong>
        <button class="btn btn--icon" id="closeReminder" type="button" aria-label="Close">✕</button>
      </div>

      <div class="reminderTop">
        <div class="seg">
          <label class="seg__label" for="reminderMode" data-i18n="reminderModeLabel">Criteria</label>
          <select id="reminderMode" class="seg__select">
            <option value="below_target" data-i18n="reminderBelowTarget">Below target</option>
            <option value="negative_only" data-i18n="reminderNegativeOnly">Negative only</option>
          </select>
        </div>

        <label class="toggle">
          <input id="reminderActiveOnly" type="checkbox" checked />
          <span data-i18n="reminderActiveOnly">Active families only</span>
        </label>
      </div>

      <div class="emailGrid">
        <div class="emailCol">
          <div class="field">
            <label for="reminderSubject" data-i18n="emailSubjectLabel">Subject</label>
            <input id="reminderSubject" type="text" maxlength="120" />
          </div>

          <div class="field">
            <label for="reminderTemplate" data-i18n="emailTemplateLabel">Template</label>
            <textarea id="reminderTemplate" rows="10"></textarea>
          </div>

          <p class="hint" data-i18n="reminderHint">
            Placeholders: {{parents}}, {{children}}, {{balance}}, {{due}}, {{target}}, {{email}}, {{today}}
          </p>

          <div class="dialog__actions">
            <button class="btn" id="copyAllReminders" type="button" data-i18n="copyAllBtn">Copy all</button>
            <button class="btn btn--primary" id="openNextReminder" type="button" data-i18n="openNextBtn">Open next email</button>
          </div>

          <div class="muted small" id="reminderCount"></div>
        </div>

        <div class="emailCol">
          <div class="field">
            <label data-i18n="reminderListLabel">Recipients</label>
            <div id="reminderList" class="reminderList"></div>
          </div>
        </div>
      </div>
    </dialog>

    <!-- Family report modal -->
    <dialog id="reportDialog" class="dialog dialog--wide">
      <div class="dialog__head">
        <strong data-i18n="reportTitle">Overview</strong>
        <button class="btn btn--icon" id="closeReport" type="button" aria-label="Close">✕</button>
      </div>

      <div id="reportContent" class="report"></div>

      <div class="dialog__actions">
        <button class="btn" id="copyReport" type="button" data-i18n="copyBtn">Copy</button>
        <button class="btn btn--primary" id="printReport" type="button" data-i18n="printBtn">Print / PDF</button>
      </div>
    </dialog>
  </div>

  <script src="app.js" defer></script>
  <!-- privacy-first analytics (no cookies) -->
  <script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
</body>
</html>
